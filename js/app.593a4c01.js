(function(t){function e(e){for(var n,i,o=e[0],l=e[1],c=e[2],u=0,d=[];u<o.length;u++)i=o[u],s[i]&&d.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);m&&m(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var m=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("Header"),a("v-content",[a("router-view")],1)],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("fragment",[a("v-navigation-drawer",{attrs:{app:"",absolute:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("MenuMobile")],1),a("v-app-bar",{attrs:{app:"",dark:"",color:"primary"}},[a("LangSwitcher"),a("v-spacer"),a("v-toolbar-title",{staticClass:"headline"},[a("router-link",{staticClass:"white--text",staticStyle:{"text-decoration":"none"},attrs:{to:"/"}},[t._v(t._s(t.$t("title")))])],1),a("v-spacer"),t.$vuetify.breakpoint.mdAndUp?a("MenuMain"):t._e(),t.$vuetify.breakpoint.smAndDown?a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}):t._e()],1)],1)},o=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-toolbar-items",[a("v-btn",{attrs:{text:"",title:"ipci",href:"https://new.dapp.ipci.io/",target:"_blank"}},[t._v(t._s(t.$t("menu.marketplace")))]),a("v-btn",{attrs:{text:"",href:"https://medium.com/@"+t.medium,target:"_blank"}},[t._v(t._s(t.$t("menu.publications")))]),a("v-btn",{attrs:{text:"",to:{name:"stat"}}},[t._v(t._s(t.$t("menu.statistics")))]),a("v-btn",{attrs:{text:"",to:{name:"history"}}},[t._v(t._s(t.$t("menu.history")))]),t.isAuthenticated?a("v-btn",{attrs:{text:"",to:{name:"add"}}},[t._v(t._s(t.$t("menu.add")))]):t._e(),t.isAuthenticated?t._e():a("v-btn",{attrs:{text:"",to:{name:"login"}}},[t._v(t._s(t.$t("menu.login")))]),t.isAuthenticated?a("v-btn",{attrs:{text:""},on:{click:t.logout}},[t._v(t._s(t.$t("menu.logout")))]):t._e()],1)},c=[],m=a("2f62"),u={data(){return{items:{}}},methods:{logout:function(){this.$store.dispatch("auth/logout").then(()=>this.$router.push("/login"))}},computed:{...Object(m["b"])("auth",["isAuthenticated"])}},d={medium:{user:"airalab",links:[{link:"https://blog.aira.life/airalab-partners-with-civic-technologies-for-identity-verification-services-fcb16a6293c8?source=rss-354ad12828b2------2",title:"Airalab Partners with Civic Technologies for Identity Verification Services",pubDate:"31.05.2019, 13:40:20"}],count_all_links:5}},h={mixins:[u],data:()=>({medium:d.medium.user})},b=h,v=a("2877"),p=a("6544"),g=a.n(p),f=a("8336"),_=a("2a7f"),y=Object(v["a"])(b,l,c,!1,null,null,null),x=y.exports;g()(y,{VBtn:f["a"],VToolbarItems:_["a"]});var w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{dense:""}},[a("v-list-item",{attrs:{href:"https://new.dapp.ipci.io/",target:"_blank"}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.$t("menu.marketplace")))])],1)],1),a("v-list-item",{attrs:{href:"https://medium.com/@"+t.medium,target:"_blank"}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.$t("menu.publications")))])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.$t("menu.statistics")))])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.$t("menu.history")))])],1)],1),t.isAuthenticated?a("v-list-item",{attrs:{to:{name:"add"}}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.$t("menu.add")))])],1)],1):t._e(),t.isAuthenticated?t._e():a("v-list-item",{attrs:{to:{name:"login"}}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.$t("menu.login")))])],1)],1),t.isAuthenticated?a("v-list-item",{on:{click:t.logout}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.$t("menu.logout")))])],1)],1):t._e()],1)},k=[],C={mixins:[u],data:()=>({medium:d.medium.user})},$=C,V=a("8860"),E=a("da13"),S=a("5d23"),O=Object(v["a"])($,w,k,!1,null,null,null),T=O.exports;g()(O,{VList:V["a"],VListItem:E["a"],VListItemContent:S["a"],VListItemTitle:S["b"]});var j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{icon:""}},n),[t._v(t._s(t.$i18n.locale))])]}}])},[a("v-list",t._l(t.langs,function(e,n){return a("v-list-item",{directives:[{name:"show",rawName:"v-show",value:t.$i18n.locale!=e,expression:"$i18n.locale != lang"}],key:n,on:{click:function(a){return t.changeLang(e)}}},[a("v-list-item-title",{staticClass:"text-uppercase"},[t._v(t._s(e))])],1)}),1)],1)},M=[],L={data:()=>({langs:["en","ru"]}),methods:{changeLang(t){window.localStorage.lang=t,this.$i18n.locale=t}}},A=L,B=a("e449"),D=Object(v["a"])(A,j,M,!1,null,null,null),I=D.exports;g()(D,{VBtn:f["a"],VList:V["a"],VListItem:E["a"],VListItemTitle:S["b"],VMenu:B["a"]});var F={data:()=>({drawer:!1}),components:{MenuMain:x,MenuMobile:T,LangSwitcher:I}},N=F,q=a("40dc"),P=a("5bc1"),U=a("f774"),z=a("2fa4"),G=Object(v["a"])(N,i,o,!1,null,null,null),R=G.exports;g()(G,{VAppBar:q["a"],VAppBarNavIcon:P["a"],VNavigationDrawer:U["a"],VSpacer:z["a"],VToolbarTitle:_["b"]});var H={components:{Header:R},mounted(){this.$store.getters["auth/isAuthenticated"]&&this.$store.dispatch("auth/user"),this.$store.dispatch("data/members"),this.$store.dispatch("data/load",!1),this.$store.dispatch("news/load")}},J=H,K=a("7496"),W=a("a75b"),Z=Object(v["a"])(J,s,r,!1,null,null,null),Y=Z.exports;g()(Z,{VApp:K["a"],VContent:W["a"]});var Q=a("f309"),X=a("a925"),tt=a("da5b"),et=a.n(tt),at=a("2992"),nt=a.n(at),st={en:{$vuetify:et.a,title:"NU DAO",desc_page:"Nazarbayev University market system model for greenhouse gases emission reduction",menu:{marketplace:"Climate initiatives system",publications:"Publications",statistics:"Statistics",history:"History",add:"Add",login:"Login",logout:"Logout"},map:{title:"Carbon balance",more:"more"},statistics:{current_rating:"This month tops",all_rating:"All time tops",ghg:"CO2 emission, ton",electricity:"Electricity comsumed, kWh",finance:"Balance, NU DAO KZT",carbon_balance:"Carbon balance, tCO2"},resume:{title:"Leaders of the Month",enemy:"Fossil of the Month",friend:"Friend of Month",cumulative_result:"Cumulative result",univ_name:"Nazarbayev University",state_goal:"Kazakhstan state goal",annual:"annual",contribution:"NU contribution",global:"Global goal to keep warming under 1.5°"},news:{publications:"About the Game"},log:{type:"Type",block_number:"Block number",member:"Member",transaction_hash:"Tx",value:"Value",token:"Token"}},ru:{$vuetify:nt.a,title:"НУ ДАО",desc_page:"Модель рыночной системы снижения выбросов парниковых газов Назарбаев Университета",menu:{marketplace:"Система климатических инициатив",publications:"Публикации",statistics:"Статистика",history:"История",add:"Добавить",login:"Войти",logout:"Выйти"},map:{title:"Углеродный баланс (к тому же месяцу 2018)",more:"подробнее"},statistics:{current_rating:"Текущий рейтинг",all_rating:"Рейтинг за все время",ghg:"Выбросов CO2, тонн",electricity:"Потреблено электроэнергии, кВт * ч",finance:"Баланс, NU DAO KZT",carbon_balance:"Углеродный баланс, tCO2"},resume:{title:"Лидеры месяца",enemy:"Поджигатель месяца",friend:"Друг месяца",cumulative_result:"Совокупный результат",univ_name:"Назарбаев Университета",state_goal:"Национальная цель Казахстана",annual:"за год",contribution:"Вклад НУ",global:"Глобальная цель для удержания роста температуры до 1,5°"},news:{publications:"Об игре"},log:{type:"Тип",block_number:"Номер блока",member:"Участник",transaction_hash:"Транзакция",value:"Кол-во",token:"токен"}}};n["a"].use(X["a"]);const rt=window.localStorage.lang||"en";var it=new X["a"]({locale:rt,fallbackLocale:"en",messages:st});n["a"].use(Q["a"]);var ot=new Q["a"]({lang:{t:(t,...e)=>it.t(t,e)},icons:{iconfont:"mdi"},theme:{themes:{light:{primary:"#4caf50",secondary:"#009688",accent:"#8bc34a",error:"#f44336",warning:"#ff5722",info:"#00bcd4",success:"#03a9f4"}}}}),lt=a("3f08");n["a"].use(lt["a"].Plugin);var ct=a("b054"),mt=a.n(ct),ut=a("bc3a"),dt=a.n(ut);const ht={links:d.medium.links,list:[]},bt={list:t=>{return[...t.links.map(t=>({icon:!0,...t})),...t.list]}},vt={load({commit:t}){let e=!1;const a=JSON.parse(localStorage.getItem("key"));a&&a.timestamp+6e5>(new Date).getTime()&&(t("news",a.list),e=!0),e||dt.a.get(`https://api.rss2json.com/v1/api.json?rss_url=https://medium.com/feed/@${d.medium.user}`).then(e=>{const a=e.data.items.filter(t=>{return!d.medium.links.find(e=>e.link===t.link)}).slice(0,d.medium.count_all_links-d.medium.links.length).map(t=>{return{title:t.title,link:t.link,pubDate:new Date(t.pubDate).toLocaleString()}});t("news",a),localStorage.setItem("key",JSON.stringify({list:a,timestamp:(new Date).getTime()}))})}},pt={news(t,e){t.list=e}};var gt={namespaced:!0,state:ht,getters:bt,actions:vt,mutations:pt};const ft="https://nudao.kz/api/v1";function _t(t){return dt.a.get(ft+t).then(t=>{return t.data})}function yt(t,e){return dt.a.post(ft+t,e)}var xt={get:_t,post:yt};function wt(){return xt.get("/members")}function kt(){return xt.get("/members/electricity/consumptions")}function Ct(){return xt.get("/members/ghg/emissions")}function $t(t){return xt.get("/members/ghg/balances?month="+t+"&mitigated=true")}function Vt(){return xt.get("/members/finance/balances")}function Et(){return xt.get("/members/finance/carbon_units_burned")}function St(){return xt.get("/members/operations/vcu_burn")}function Ot(){return xt.get("/members/operations/vcu_emission")}function Tt(t){return xt.post("/members/electricity/consumptions",t)}const jt={auth:{POST:t=>{if("admin"===t.login&&"admin"===t.password)return{token:"This-is-a-mocked-token"};throw new Error("err")}},"user/me":{GET:t=>{if("This-is-a-mocked-token"===t.token)return{name:"admin"};throw new Error("err")}}};function Mt({url:t,method:e,data:a}){return new Promise((n,s)=>{setTimeout(()=>{try{n(jt[t][e||"GET"](a))}catch(r){s(new Error(r))}},1e3)})}var Lt={getMembers:wt,getElectricity:kt,getGhgEmission:Ct,getGhgBalances:$t,getFinanceBalances:Vt,getCarbonBurn:Et,getVCUBurn:St,getVCUEmission:Ot,postElectricity:Tt,auth:Mt};let At=null;const Bt=new Date;Bt.setMonth(Bt.getMonth()-1);let Dt=Bt.getMonth()+1;Dt<10&&(Dt="0"+Dt),At=Dt+"/"+Bt.getFullYear();const It={month:At,members:[],electricity:{},ghg_emission:{},ghg_balance:{},finance:{},carbon_burn:{},log:{burn:[],emission:[]}},Ft={memberName:t=>e=>{const a=t.members.find(t=>{return t.id===e});return a.name},member:t=>(e,a=!1)=>{const n=t.members.find(t=>{return t.id===e}),s={name:n.name,electricity:null,ghg_emission:null,ghg_balance:null,finance:null};if(a){if(t.electricity[e]){const n=t.electricity[e].list.find(t=>{return t.month===a});n&&(s.electricity=n.value)}if(t.ghg_emission[e]){const n=t.ghg_emission[e].list.find(t=>{return t.month===a});n&&(s.ghg_emission=n.value)}if(t.ghg_balance[e]){const n=t.ghg_balance[e].list.find(t=>{return t.month===a});n&&(s.ghg_balance=n.value)}t.finance[e]>=0&&(s.finance=t.finance[e]),t.carbon_burn[e]>=0&&(s.carbon_burn=t.carbon_burn[e])}else t.electricity[e]&&t.electricity[e].list.forEach(t=>{s.electricity+=t.value}),t.ghg_emission[e]&&t.ghg_emission[e].list.forEach(t=>{s.ghg_emission+=t.value}),t.ghg_balance[e]&&t.ghg_balance[e].list.forEach(t=>{s.ghg_balance+=t.value}),t.finance[e]>=0&&(s.finance=t.finance[e]),t.carbon_burn[e]>=0&&(s.carbon_burn=t.carbon_burn[e]);return s},current:(t,e)=>{return t.members.map(a=>{return e.member(a.id,t.month)})},all:(t,e)=>{return t.members.map(t=>{return e.member(t.id,!1)})},min:t=>{const e={};Object.values(t.ghg_balance).forEach(a=>{e[a.member_id]=0,a.list.forEach(n=>{n.month===t.month&&(e[a.member_id]=n.value)})});let a=null;if(Object.keys(e).forEach(t=>{(null===a||e[t]<a.value)&&(a={member:"-",member_id:Number(t),value:e[t]})}),null===a)return{member:"-",member_id:0,value:0};const n=t.members.find(t=>{return t.id===a.member_id});return n?{...a,member:n.name}:a},max:t=>{const e={};Object.values(t.ghg_balance).forEach(a=>{e[a.member_id]=0,a.list.forEach(n=>{n.month===t.month&&(e[a.member_id]=n.value)})});let a=null;if(Object.keys(e).forEach(t=>{(null===a||e[t]>a.value)&&(a={member:"-",member_id:Number(t),value:e[t]})}),null===a)return{member:"-",member_id:0,value:0};const n=t.members.find(t=>{return t.id===a.member_id});return n?{...a,member:n.name}:a},sum:t=>{let e=0;return Object.values(t.ghg_balance).forEach(a=>{a.list.forEach(a=>{a.month===t.month&&(e+=Number(a.value))})}),e},log:(t,e)=>{const a=t.log.burn.map(t=>{return{type:"burn",member:e.memberName(t.member_id),...t}}),n=t.log.emission.map(t=>{return{type:"emission",member:e.memberName(t.member_id),...t}});return[...a,...n].sort((t,e)=>{return t.block_number>e.block_number?-1:t.block_number<e.block_number?1:0})}},Nt={async members({commit:t}){const e=await Lt.getMembers();t("members",e)},async load({dispatch:t}){t("loadByType","electricity"),t("loadByType","ghg_emission"),t("loadGhgBalance"),t("loadFinance"),t("loadCarbonBurn"),t("loadLogBurn"),t("loadLogEmission")},async loadFinance({commit:t}){const e=await Lt.getFinanceBalances(),a={};e.forEach(t=>{a[t.member_id]=t.financial_balance}),t("setData",{type:"finance",data:a})},async loadCarbonBurn({commit:t}){const e=await Lt.getCarbonBurn(),a={};e.forEach(t=>{a[t.member_id]=t.vcu_burned}),t("setData",{type:"carbon_burn",data:a})},async loadGhgBalance({commit:t}){let e={};const a=await Lt.getGhgBalances(At);a.balances.forEach(t=>{e[t.member_id]||(e[t.member_id]={member_id:t.member_id,list:[]}),e[t.member_id].list.push({month:a.month,value:t.balance})}),t("setData",{type:"ghg_balance",data:e})},async loadByType({commit:t},e){let a,n;"electricity"===e?(a="getElectricity",n="consumption"):"ghg_emission"===e&&(a="getGhgEmission",n="ghg_emission");const s=await Lt[a](),r={};s.forEach(t=>{t.records.forEach(e=>{r[e.member_id]||(r[e.member_id]={member_id:e.member_id,list:[]}),r[e.member_id].list.push({month:t.month,value:e[n]})})}),t("setData",{type:e,data:r})},async loadLogBurn({commit:t}){const e=await Lt.getVCUBurn(),a=[];e.forEach(t=>{t.burn_operations&&t.burn_operations.forEach(e=>{e.operations.forEach(n=>{a.push({transaction_hash:n.transaction_hash.substr(10,66),block_number:n.block_number,value:n.value,token:e.vcu_address,member_id:t.member_id})})})}),t("setLog",{type:"burn",data:a})},async loadLogEmission({commit:t}){const e=await Lt.getVCUEmission(),a=[];e.forEach(t=>{t.emission_operations&&t.emission_operations.forEach(e=>{e.operations.forEach(n=>{a.push({transaction_hash:n.transaction_hash.substr(10,66),block_number:n.block_number,value:n.value,token:e.vcu_address,member_id:t.member_id})})})}),t("setLog",{type:"emission",data:a})},save(t,e=!1){return Lt.postElectricity(e)}},qt={members(t,e){t.members=e},setData(t,{type:e,data:a}){t[e]=a},setLog(t,{type:e,data:a}){t.log[e]=a}};var Pt={namespaced:!0,state:It,getters:Ft,actions:Nt,mutations:qt};const Ut={profile:{},token:localStorage.getItem("user-token")||"",status:"",hasLoadedOnce:!1},zt={isAuthenticated:t=>!!t.token,authStatus:t=>t.status,profile:t=>t.profile},Gt={request({commit:t,dispatch:e},a){return new Promise((n,s)=>{t("request"),Lt.auth({url:"auth",data:a,method:"POST"}).then(a=>{localStorage.setItem("user-token",a.token),t("success",a),e("user"),n(a)}).catch(e=>{t("error",e),localStorage.removeItem("user-token"),s(e)})})},user({commit:t,dispatch:e,state:a}){t("request"),Lt.auth({url:"user/me",data:{token:a.token}}).then(e=>{t("user",e)}).catch(()=>{t("error"),e("logout")})},logout({commit:t}){return new Promise(e=>{t("logout"),localStorage.removeItem("user-token"),e()})}},Rt={request(t){t.status="loading"},success(t,e){t.status="success",t.token=e.token,t.hasLoadedOnce=!0},error(t){t.status="error",t.hasLoadedOnce=!0},logout(t){t.token=""},user(t,e){t.status="success",n["a"].set(t,"profile",e)}};var Ht={namespaced:!0,state:Ut,getters:zt,actions:Gt,mutations:Rt};n["a"].use(m["a"]);const Jt=!1;var Kt=new m["a"].Store({modules:{news:gt,data:Pt,auth:Ht},strict:!0,plugins:Jt?[mt()()]:[]}),Wt=a("8c4f"),Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",[a("p",{staticClass:"subheading text-center font-weight-regular"},[t._v(t._s(t.$t("desc_page")))])])],1),a("v-row",[a("v-col",{attrs:{lg:"6",cols:"12"}},[a("MapCard",{staticStyle:{height:"100%"}})],1),a("v-col",{attrs:{lg:"6",cols:"12"}},[a("Statistic",{staticStyle:{height:"100%"}})],1)],1),a("v-row",[a("v-col",{attrs:{lg:"6",cols:"12"}},[a("Resume",{staticStyle:{height:"100%"}})],1),a("v-col",{attrs:{lg:"6",cols:"12"}},[a("News",{staticStyle:{height:"100%"}})],1)],1)],1)},Yt=[],Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[t._v("\n    "+t._s(t.$t("map.title"))+" \n    "),a("router-link",{staticClass:"body-2",attrs:{to:{name:"map"}}},[t._v(t._s(t.$t("map.more")))])],1),a("Map",{staticStyle:{width:"100%",height:"500px"}})],1)},Xt=[],te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iframe",{attrs:{frameborder:"0",allowtransparency:"true",allowfullscreen:"true",title:"data visualization",marginheight:"0",marginwidth:"0",src:"https://public.tableau.com/views/NUDAOviz/CarbonBalanceMap?:embed=y&:display_count=yes&publish=yes&:embed=y&:showVizHome=n&:tabs=n&position=right&:apiID=host0"}})},ee=[],ae={},ne=Object(v["a"])(ae,te,ee,!1,null,null,null),se=ne.exports,re={components:{Map:se}},ie=re,oe=a("b0af"),le=a("99d9"),ce=Object(v["a"])(ie,Qt,Xt,!1,null,null,null),me=ce.exports;g()(ce,{VCard:oe["a"],VCardTitle:le["c"]});var ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-tabs",{attrs:{grow:!0},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",[t._v(t._s(t.$t("statistics.current_rating")))]),a("v-tab",[t._v(t._s(t.$t("statistics.all_rating")))])],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("v-data-table",{attrs:{"hide-default-footer":"","sort-by":t.sort,"sort-desc":!1,headers:t.headers,items:t.current},scopedSlots:t._u([{key:"item.name",fn:function(e){var n=e.item;return[a("img",{staticStyle:{"vertical-align":"middle"},style:t.getStyle(n.ghg_balance),attrs:{src:"assets/i/"+t.getIcon(n.ghg_balance)}}),t._v("\n          "+t._s(n.name)+"\n        ")]}},{key:"item.finance",fn:function(e){var a=e.item;return[t._v(t._s(null===a.finance?"-":Math.round(a.finance)))]}},{key:"item.electricity",fn:function(e){var a=e.item;return[t._v(t._s(null===a.electricity?"-":Math.round(a.electricity)))]}},{key:"item.ghg_emission",fn:function(e){var a=e.item;return[t._v(t._s(null===a.ghg_emission?"-":Math.round(a.ghg_emission)))]}},{key:"item.ghg_balance",fn:function(e){var n=e.item;return[a("b",{class:t.getColor(n.ghg_balance)+"--text"},[t._v(t._s(null===n.ghg_balance?"-":Math.round(n.ghg_balance)))])]}}])})],1),a("v-tab-item",[a("v-data-table",{attrs:{"hide-default-footer":"","sort-by":t.sort,"sort-desc":!1,headers:t.headers,items:t.all},scopedSlots:t._u([{key:"item.name",fn:function(e){var n=e.item;return[a("img",{staticStyle:{"vertical-align":"middle"},style:t.getStyle(n.ghg_balance),attrs:{src:"assets/i/"+t.getIcon(n.ghg_balance)}}),t._v("\n          "+t._s(n.name)+"\n        ")]}},{key:"item.finance",fn:function(e){var a=e.item;return[t._v(t._s(null===a.finance?"-":Math.round(a.finance)))]}},{key:"item.electricity",fn:function(e){var a=e.item;return[t._v(t._s(null===a.electricity?"-":Math.round(a.electricity)))]}},{key:"item.ghg_emission",fn:function(e){var a=e.item;return[t._v(t._s(null===a.ghg_emission?"-":Math.round(a.ghg_emission)))]}},{key:"item.ghg_balance",fn:function(e){var n=e.item;return[a("b",{class:t.getColor(n.ghg_balance)+"--text"},[t._v(t._s(null===n.ghg_balance?"-":Math.round(n.ghg_balance)))])]}}])})],1)],1)],1)},de=[],he={computed:{...Object(m["b"])("data",["current","all"])},data:()=>({tab:null,sort:"ghg_balance",headers:[{text:"",sortable:!1,value:"name",width:"30%"},{text:it.t("statistics.finance"),value:"finance"},{text:it.t("statistics.electricity"),value:"electricity"},{text:it.t("statistics.ghg"),value:"ghg_emission"},{text:it.t("statistics.carbon_balance"),value:"ghg_balance"}]}),methods:{getIcon(t){return null===t?"monster_red.png":t<-5?"monster_green.png":t>-5&&t<5?"monster_orange.png":"monster_red.png"},getStyle(t){return null===t?"width: 27px;margin-right: 7px;margin-left: 5px;":t<-5?"width: 34px;margin-right: 5px;":t>-5&&t<5?"width: 34px;margin-right: 5px;":"width: 27px;margin-right: 7px;margin-left: 5px;"},getColor(t){return null===t?"red":t<-5?"green":t>-5&&t<5?"orange":"red"}}},be=he,ve=a("8fea"),pe=a("71a3"),ge=a("c671"),fe=a("fe57"),_e=a("aac8"),ye=Object(v["a"])(be,ue,de,!1,null,null,null),xe=ye.exports;g()(ye,{VCard:oe["a"],VDataTable:ve["a"],VTab:pe["a"],VTabItem:ge["a"],VTabs:fe["a"],VTabsItems:_e["a"]});var we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[t._v(t._s(t.$t("resume.title")))]),a("v-card-text",[a("ResumeScene",{staticStyle:{margin:"20px 0"},attrs:{dir:t.sum>0?"left":"right"}}),a("div",{staticClass:"d-flex justify-space-between align-stretch",staticStyle:{height:"100%"}},[a("div",{staticClass:"pa-5 text-center align-self-center"},[t._v("\n        "+t._s(t.$t("resume.enemy"))+"\n        "),a("br"),a("div",{staticClass:"display-1 mt-2"},[a("b",[t._v(t._s(t.max.member))])]),a("br"),a("span",{staticClass:"title",class:{"primary--text":t.max.value<=0,"warning--text":t.max.value>0}},[t._v(t._s(Math.round(t.max.value)))]),t._v(" tCO2\n      ")]),a("div",{staticClass:"pa-5 text-center align-self-center"},[t._v("\n        "+t._s(t.$t("resume.cumulative_result"))+"\n        "),a("br"),a("div",{staticClass:"display-1 mt-2"},[a("b",[t._v(t._s(t.$t("resume.univ_name")))])]),a("br"),a("span",{staticClass:"title",class:{"primary--text":t.sum<=0,"warning--text":t.sum>0}},[t._v(t._s(Math.round(t.sum)))]),t._v(" tCO2\n      ")]),a("div",{staticClass:"pa-5 text-center align-self-center"},[t._v("\n        "+t._s(t.$t("resume.friend"))+"\n        "),a("br"),a("div",{staticClass:"display-1 mt-2"},[a("b",[t._v(t._s(t.min.member))])]),a("br"),a("span",{staticClass:"title",class:{"primary--text":t.min.value<=0,"warning--text":t.min.value>0}},[t._v(t._s(Math.round(t.min.value)))]),t._v(" tCO2\n      ")])]),a("div",[a("p",[t._v("\n        "+t._s(t.$t("resume.state_goal"))+":\n        "),a("span",{staticClass:"green--text"},[t._v("-72 000")]),t._v("\n        tCO2 "+t._s(t.$t("resume.annual"))+"\n      ")]),a("p",[t._v("\n        "+t._s(t.$t("resume.contribution"))+":\n        "),a("span",{staticClass:"green--text"},[t._v(t._s(Math.round(t.sum)))]),t._v(" tCO2\n      ")]),a("p",[t._v("\n        "+t._s(t.$t("resume.global"))+":\n        "),a("span",{staticClass:"green--text"},[t._v("-36 000 000")]),t._v(" tCO2\n      ")])])],1)],1)},ke=[],Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"animation-scene"}},[a("div",{attrs:{id:"animation-scene--content"}},[t._m(0),a("div",{staticClass:"animation-scales",class:"left"==t.dir?"animation-red":"animation-green"},[a("div",{staticClass:"sprite-basic-scales-part1"}),a("div",{staticClass:"sprite-basic-scales-part2"}),t._m(1)]),t._m(2)])])},$e=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animation-dino--red"},[a("div",{staticClass:"sprite-basic-dino-red-body"}),a("div",{staticClass:"sprite-basic-dino-red-fire"}),a("div",{staticClass:"sprite-basic-dino-red-hand left"}),a("div",{staticClass:"sprite-basic-dino-red-hand right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animation-scales--move"},[a("div",{staticClass:"animation-scales--red"},[a("div",{staticClass:"sprite-basic-scales-red-top"}),a("div",{staticClass:"sprite-basic-scales-red-action"}),a("div",{staticClass:"sprite-basic-scales-red-bottom"})]),a("div",{staticClass:"animation-scales--green"},[a("div",{staticClass:"sprite-basic-scales-green-top"}),a("div",{staticClass:"sprite-basic-scales-green-action"}),a("div",{staticClass:"sprite-basic-scales-green-bottom"})]),a("div",{staticClass:"sprite-basic-scales-part3"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animation-dino--green"},[a("div",{staticClass:"sprite-basic-dino-green-body"}),a("div",{staticClass:"sprite-basic-dino-green-brows"}),a("div",{staticClass:"sprite-basic-dino-green-leaf"}),a("div",{staticClass:"sprite-basic-dino-green-hand"})])}],Ve={props:{dir:{type:String,default:"right"}},mounted(){this.scale(),window.addEventListener("resize",this.scale,!1)},methods:{scale(){const t=document.querySelector("#animation-scene"),e=document.querySelector("#animation-scene--content"),a=(t.offsetWidth/e.offsetWidth).toFixed(2);e.style.transform="scale("+a+")"}}},Ee=Ve,Se=(a("7601"),Object(v["a"])(Ee,Ce,$e,!1,null,"429e9a60",null)),Oe=Se.exports,Te={computed:{...Object(m["b"])("data",["min","max","sum"])},components:{ResumeScene:Oe}},je=Te,Me=Object(v["a"])(je,we,ke,!1,null,null,null),Le=Me.exports;g()(Me,{VCard:oe["a"],VCardText:le["b"],VCardTitle:le["c"]});var Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[t._v("Құттықтау сөз")])],1)},Be=[],De={},Ie=Object(v["a"])(De,Ae,Be,!1,null,null,null),Fe=Ie.exports;g()(Ie,{VCard:oe["a"],VCardTitle:le["c"]});var Ne={components:{MapCard:me,Statistic:xe,Resume:Le,News:Fe}},qe=Ne,Pe=a("62ad"),Ue=a("a523"),ze=a("0fd9"),Ge=Object(v["a"])(qe,Zt,Yt,!1,null,null,null),Re=Ge.exports;g()(Ge,{VCol:Pe["a"],VContainer:Ue["a"],VRow:ze["a"]});var He=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("Statistic")],1)},Je=[],Ke={components:{Statistic:xe}},We=Ke,Ze=Object(v["a"])(We,He,Je,!1,null,null,null),Ye=Ze.exports;g()(Ze,{VContainer:Ue["a"]});var Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Войти")])],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.required,label:"Login","prepend-icon":"mdi-account",type:"text"},model:{value:t.form.fields.login,callback:function(e){t.$set(t.form.fields,"login",e)},expression:"form.fields.login"}}),a("v-text-field",{attrs:{rules:t.required,label:"Password","prepend-icon":"mdi-lastpass",type:"password"},model:{value:t.form.fields.password,callback:function(e){t.$set(t.form.fields,"password",e)},expression:"form.fields.password"}}),a("v-alert",{staticClass:"mb-4",attrs:{type:"error"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v("Error")])],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary"},on:{click:t.submit}},[t._v("Войти")])],1)],1)],1)],1)],1)},Xe=[],ta={data(){return{error:!1,valid:!0,form:{fields:{login:"",password:""}},required:[t=>!!t||"Field is required"]}},methods:{submit(){this.error=!1,this.$refs.form.validate()&&this.$store.dispatch("auth/request",{login:this.form.fields.login,password:this.form.fields.password}).then(()=>{this.$router.push("/")}).catch(()=>{this.error=!0})}}},ea=ta,aa=a("0798"),na=a("4bd4"),sa=a("8654"),ra=a("71d9"),ia=Object(v["a"])(ea,Qe,Xe,!1,null,null,null),oa=ia.exports;g()(ia,{VAlert:aa["a"],VBtn:f["a"],VCard:oe["a"],VCardActions:le["a"],VCardText:le["b"],VCol:Pe["a"],VContainer:Ue["a"],VForm:na["a"],VRow:ze["a"],VTextField:sa["a"],VToolbar:ra["a"],VToolbarTitle:_["b"]});var la=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Новые данные")])],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:t.required,label:"Date",type:"text"},model:{value:t.monthForm,callback:function(e){t.monthForm=e},expression:"monthForm"}})],1)],1)],1),t._l(t.rows,function(e,n){return a("div",{key:n},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{rules:t.required,label:"Member",disabled:e.disabled,type:"text"},model:{value:e.member,callback:function(a){t.$set(e,"member",a)},expression:"row.member"}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{rules:t.required,label:"Consumption",type:"text"},model:{value:e.consumption,callback:function(a){t.$set(e,"consumption",a)},expression:"row.consumption"}})],1)],1)],1),a("v-divider")],1)})],2),a("v-alert",{staticClass:"mb-4",attrs:{type:"success"},model:{value:t.success,callback:function(e){t.success=e},expression:"success"}},[t._v("Data saved.")])],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary",disabled:t.request},on:{click:t.submit}},[t._v("Сохранить")])],1)],1)],1)],1)],1)},ca=[],ma={data(){return{monthForm:"",success:!1,request:!1,valid:!0,rows:[{disabled:!1,member:"",consumption:""}],required:[t=>!!t||"Field is required"]}},computed:{...Object(m["b"])("auth",["profile"]),...Object(m["c"])("data",["members","month"])},watch:{members:function(){this.init()}},mounted(){this.monthForm=this.month,this.init()},methods:{init(){this.rows=[],this.members.forEach(t=>{this.rows.push({disabled:!0,member:t.name,consumption:""})})},add(){this.rows.push({disabled:!1,member:"",consumption:""})},submit(){if(this.$refs.form.validate()){this.request=!0;const t=[];this.rows.forEach(e=>{const a=this.members.find(t=>{return t.name===e.member});t.push({member_id:a.id,member_name:e.member,consumption:e.consumption})}),this.$store.dispatch("data/save",{author:this.profile.name,month:this.monthForm,records:t}).then(()=>{this.success=!0})}}}},ua=ma,da=a("ce7e"),ha=Object(v["a"])(ua,la,ca,!1,null,null,null),ba=ha.exports;g()(ha,{VAlert:aa["a"],VBtn:f["a"],VCard:oe["a"],VCardActions:le["a"],VCardText:le["b"],VCol:Pe["a"],VContainer:Ue["a"],VDivider:da["a"],VForm:na["a"],VRow:ze["a"],VTextField:sa["a"],VToolbar:ra["a"],VToolbarTitle:_["b"]});var va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticStyle:{height:"100%"},attrs:{fluid:""}},[a("div",{staticStyle:{display:"flex",height:"100%"}},[a("div",{staticStyle:{"flex-grow":"1"}},[a("Map",{staticStyle:{width:"100%",height:"100%"}})],1)])])},pa=[],ga={components:{Map:se}},fa=ga,_a=Object(v["a"])(fa,va,pa,!1,null,null,null),ya=_a.exports;g()(_a,{VContainer:Ue["a"]});var xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-data-table",{attrs:{headers:t.headers,items:t.log},scopedSlots:t._u([{key:"item.transaction_hash",fn:function(e){var n=e.item;return[a("LinkExplorer",{attrs:{text:n.transaction_hash,category:"tx"}},[t._v(t._s(n.transaction_hash))])]}},{key:"item.value",fn:function(e){var a=e.item;return[t._v(t._s(t._f("toDec")(a.value)))]}},{key:"item.token",fn:function(e){var n=e.item;return[a("LinkExplorer",{attrs:{text:n.token,category:"token"}},[t._v(t._s(n.token))])]}}])})],1)},wa=[],ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:t.href,target:"_blank",title:t.text}},[t._v(t._s(t.label))])},Ca=[];const $a=t=>{const e=Math.sign(t);if(t=Math.abs(t),/\d+\.?\d*e[+-]*\d+/i.test(t)){const e="0",a=String(t).toLowerCase().split("e"),n=a.pop();let s=Math.abs(n);const r=n/s,i=a[0].split(".");if(-1===r)s-=i[0].length,t=s<0?i[0].slice(0,s)+"."+i[0].slice(s)+(2===i.length?i[1]:""):e+"."+new Array(s+1).join(e)+i.join("");else{const a=i[1];a&&(s-=a.length),t=s<0?i[0]+a.slice(0,s)+"."+a.slice(s):i.join("")+new Array(s+1).join(e)}}return e<0?"-"+t:t},Va=(t,e="address",a=1)=>{let n="etherscan.io";if(""===e&&(e="address"),4451===a)n="explorer.aira.life","address"===e&&(e="addr");else{let t="";4===a&&(t="rinkeby."),n=t+n}return`https://${n}/${e}/${t}`},Ea=(t,e="ipfs")=>{const a="ipfs.io";return""===e&&(e="ipfs"),`https://${a}/${e}/${t}`};var Sa={props:{type:{type:String,default:"chain",validator:t=>["chain","ipfs"].includes(t)},text:{type:String},category:{type:String,default:""},isSlice:{type:Boolean,default:!0}},computed:{href:function(){return"chain"===this.type?Va(this.text,this.category,1):Ea(this.text,this.category)},label:function(){return this.isSlice?this.text.slice(0,6)+"..."+this.text.slice(-4):this.text}}},Oa=Sa,Ta=Object(v["a"])(Oa,ka,Ca,!1,null,null,null),ja=Ta.exports,Ma={components:{LinkExplorer:ja},computed:{...Object(m["b"])("data",["log"])},data:()=>({headers:[{text:it.t("log.type"),sortable:!1,value:"type"},{text:it.t("log.block_number"),value:"block_number"},{text:it.t("log.member"),value:"member"},{text:it.t("log.transaction_hash"),value:"transaction_hash"},{text:it.t("log.value"),value:"value"},{text:it.t("log.token"),value:"token"}]}),methods:{getIcon(t){return t<-5?"monster_green.png":t>-5&&t<5?"monster_orange.png":"monster_red.png"},getStyle(t){return t<-5?"width: 34px;margin-right: 5px;":t>-5&&t<5?"width: 34px;margin-right: 5px;":"width: 27px;margin-right: 7px;margin-left: 5px;"},getColor(t){return t<-5?"green":t>-5&&t<5?"orange":"red"}}},La=Ma,Aa=Object(v["a"])(La,xa,wa,!1,null,null,null),Ba=Aa.exports;g()(Aa,{VContainer:Ue["a"],VDataTable:ve["a"]}),n["a"].use(Wt["a"]);const Da=(t,e,a)=>{Kt.getters["auth/isAuthenticated"]?a("/"):a()},Ia=(t,e,a)=>{Kt.getters["auth/isAuthenticated"]?a():a("/login")};var Fa=new Wt["a"]({base:"",routes:[{path:"/",name:"home",component:Re},{path:"/stat",name:"stat",component:Ye},{path:"/map",name:"map",component:ya},{path:"/history",name:"history",component:Ba},{path:"/add",name:"add",component:ba,beforeEnter:Ia},{path:"/login",name:"login",component:oa,beforeEnter:Da}]});n["a"].filter("toDec",$a),n["a"].filter("urlExplorer",Va),n["a"].filter("urlIpfs",Ea),n["a"].config.productionTip=!1,new n["a"]({vuetify:ot,i18n:it,store:Kt,router:Fa,render:t=>t(Y)}).$mount("#app")},7601:function(t,e,a){"use strict";var n=a("f290"),s=a.n(n);s.a},f290:function(t,e,a){}});
//# sourceMappingURL=app.593a4c01.js.map